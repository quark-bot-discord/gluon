<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>util/builder/embedBuilder.js - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="ActionRow.html">ActionRow</a><ul class='methods'><li data-type='method'><a href="ActionRow.html#addComponent">addComponent</a></li><li data-type='method'><a href="ActionRow.html#toJSON">toJSON</a></li></ul></li><li><a href="Attachment.html">Attachment</a></li><li><a href="AuditLog.html">AuditLog</a></li><li><a href="Button.html">Button</a><ul class='methods'><li data-type='method'><a href="Button.html#setCustomID">setCustomID</a></li><li data-type='method'><a href="Button.html#setDisabled">setDisabled</a></li><li data-type='method'><a href="Button.html#setEmoji">setEmoji</a></li><li data-type='method'><a href="Button.html#setLabel">setLabel</a></li><li data-type='method'><a href="Button.html#setStyle">setStyle</a></li><li data-type='method'><a href="Button.html#setURL">setURL</a></li><li data-type='method'><a href="Button.html#toJSON">toJSON</a></li></ul></li><li><a href="ButtonClick.html">ButtonClick</a></li><li><a href="Channel.html">Channel</a><ul class='methods'><li data-type='method'><a href="Channel.html#send">send</a></li></ul></li><li><a href="ChannelMessageManager.html">ChannelMessageManager</a><ul class='methods'><li data-type='method'><a href="ChannelMessageManager.html#fetch">fetch</a></li><li data-type='method'><a href="ChannelMessageManager.html#fetchPinned">fetchPinned</a></li><li data-type='method'><a href="ChannelMessageManager.html#sweepMessages">sweepMessages</a></li></ul></li><li><a href="Client.html">Client</a><ul class='methods'><li data-type='method'><a href="Client.html#addMemberRole">addMemberRole</a></li><li data-type='method'><a href="Client.html#bundleCache">bundleCache</a></li><li data-type='method'><a href="Client.html#createWebhook">createWebhook</a></li><li data-type='method'><a href="Client.html#deleteChannelMessage">deleteChannelMessage</a></li><li data-type='method'><a href="Client.html#deleteWebhook">deleteWebhook</a></li><li data-type='method'><a href="Client.html#editMessage">editMessage</a></li><li data-type='method'><a href="Client.html#fetchChannel">fetchChannel</a></li><li data-type='method'><a href="Client.html#fetchChannelMessages">fetchChannelMessages</a></li><li data-type='method'><a href="Client.html#fetchChannelWebhooks">fetchChannelWebhooks</a></li><li data-type='method'><a href="Client.html#fetchMember">fetchMember</a></li><li data-type='method'><a href="Client.html#fetchMessage">fetchMessage</a></li><li data-type='method'><a href="Client.html#fetchRole">fetchRole</a></li><li data-type='method'><a href="Client.html#fetchWebhook">fetchWebhook</a></li><li data-type='method'><a href="Client.html#followStatusChannel">followStatusChannel</a></li><li data-type='method'><a href="Client.html#getCacheCounts">getCacheCounts</a></li><li data-type='method'><a href="Client.html#getMemberCount">getMemberCount</a></li><li data-type='method'><a href="Client.html#login">login</a></li><li data-type='method'><a href="Client.html#modifyWebhook">modifyWebhook</a></li><li data-type='method'><a href="Client.html#postWebhook">postWebhook</a></li><li data-type='method'><a href="Client.html#purgeChannelMessages">purgeChannelMessages</a></li><li data-type='method'><a href="Client.html#registerCommands">registerCommands</a></li><li data-type='method'><a href="Client.html#removeMemberRole">removeMemberRole</a></li><li data-type='method'><a href="Client.html#search">search</a></li><li data-type='method'><a href="Client.html#sendMessage">sendMessage</a></li><li data-type='method'><a href="Client.html#setStatus">setStatus</a></li></ul></li><li><a href="Command.html">Command</a><ul class='methods'><li data-type='method'><a href="Command.html#addOption">addOption</a></li><li data-type='method'><a href="Command.html#setDefaultLocale">setDefaultLocale</a></li><li data-type='method'><a href="Command.html#setDefaultMemberPermissions">setDefaultMemberPermissions</a></li><li data-type='method'><a href="Command.html#setDescription">setDescription</a></li><li data-type='method'><a href="Command.html#setName">setName</a></li><li data-type='method'><a href="Command.html#setNsfw">setNsfw</a></li><li data-type='method'><a href="Command.html#setType">setType</a></li><li data-type='method'><a href="Command.html#toJSON">toJSON</a></li></ul></li><li><a href="CommandChoice.html">CommandChoice</a><ul class='methods'><li data-type='method'><a href="CommandChoice.html#setDefaultLocale">setDefaultLocale</a></li><li data-type='method'><a href="CommandChoice.html#setName">setName</a></li><li data-type='method'><a href="CommandChoice.html#setValue">setValue</a></li><li data-type='method'><a href="CommandChoice.html#toJSON">toJSON</a></li></ul></li><li><a href="CommandOption.html">CommandOption</a><ul class='methods'><li data-type='method'><a href="CommandOption.html#addChoice">addChoice</a></li><li data-type='method'><a href="CommandOption.html#addOption">addOption</a></li><li data-type='method'><a href="CommandOption.html#setAutocomplete">setAutocomplete</a></li><li data-type='method'><a href="CommandOption.html#setChannelTypes">setChannelTypes</a></li><li data-type='method'><a href="CommandOption.html#setDefaultLocale">setDefaultLocale</a></li><li data-type='method'><a href="CommandOption.html#setDescription">setDescription</a></li><li data-type='method'><a href="CommandOption.html#setMaxLength">setMaxLength</a></li><li data-type='method'><a href="CommandOption.html#setMaxValue">setMaxValue</a></li><li data-type='method'><a href="CommandOption.html#setMinLength">setMinLength</a></li><li data-type='method'><a href="CommandOption.html#setMinValue">setMinValue</a></li><li data-type='method'><a href="CommandOption.html#setName">setName</a></li><li data-type='method'><a href="CommandOption.html#setRequired">setRequired</a></li><li data-type='method'><a href="CommandOption.html#setType">setType</a></li><li data-type='method'><a href="CommandOption.html#toJSON">toJSON</a></li></ul></li><li><a href="Dropdown.html">Dropdown</a><ul class='methods'><li data-type='method'><a href="Dropdown.html#addChannelTypes">addChannelTypes</a></li><li data-type='method'><a href="Dropdown.html#addOption">addOption</a></li><li data-type='method'><a href="Dropdown.html#setCustomID">setCustomID</a></li><li data-type='method'><a href="Dropdown.html#setDisabled">setDisabled</a></li><li data-type='method'><a href="Dropdown.html#setMaxValue">setMaxValue</a></li><li data-type='method'><a href="Dropdown.html#setMinValue">setMinValue</a></li><li data-type='method'><a href="Dropdown.html#setPlaceholder">setPlaceholder</a></li><li data-type='method'><a href="Dropdown.html#setType">setType</a></li><li data-type='method'><a href="Dropdown.html#toJSON">toJSON</a></li></ul></li><li><a href="DropdownOption.html">DropdownOption</a><ul class='methods'><li data-type='method'><a href="DropdownOption.html#setDefault">setDefault</a></li><li data-type='method'><a href="DropdownOption.html#setDescription">setDescription</a></li><li data-type='method'><a href="DropdownOption.html#setEmoji">setEmoji</a></li><li data-type='method'><a href="DropdownOption.html#setLabel">setLabel</a></li><li data-type='method'><a href="DropdownOption.html#setValue">setValue</a></li><li data-type='method'><a href="DropdownOption.html#toJSON">toJSON</a></li></ul></li><li><a href="Embed.html">Embed</a><ul class='methods'><li data-type='method'><a href="Embed.html#addField">addField</a></li><li data-type='method'><a href="Embed.html#setAuthor">setAuthor</a></li><li data-type='method'><a href="Embed.html#setColor">setColor</a></li><li data-type='method'><a href="Embed.html#setDescription">setDescription</a></li><li data-type='method'><a href="Embed.html#setFooter">setFooter</a></li><li data-type='method'><a href="Embed.html#setImage">setImage</a></li><li data-type='method'><a href="Embed.html#setThumbnail">setThumbnail</a></li><li data-type='method'><a href="Embed.html#setTimestamp">setTimestamp</a></li><li data-type='method'><a href="Embed.html#setTitle">setTitle</a></li><li data-type='method'><a href="Embed.html#setURL">setURL</a></li><li data-type='method'><a href="Embed.html#toJSON">toJSON</a></li><li data-type='method'><a href="Embed.html#toString">toString</a></li></ul></li><li><a href="Emoji.html">Emoji</a></li><li><a href="Guild.html">Guild</a><ul class='methods'><li data-type='method'><a href="Guild.html#ban">ban</a></li><li data-type='method'><a href="Guild.html#calculateMemberCacheCount">calculateMemberCacheCount</a></li><li data-type='method'><a href="Guild.html#calculateMessageCacheCount">calculateMessageCacheCount</a></li><li data-type='method'><a href="Guild.html#fetchAuditLogs">fetchAuditLogs</a></li><li data-type='method'><a href="Guild.html#fetchBan">fetchBan</a></li><li data-type='method'><a href="Guild.html#fetchChannels">fetchChannels</a></li><li data-type='method'><a href="Guild.html#fetchInvites">fetchInvites</a></li><li data-type='method'><a href="Guild.html#kick">kick</a></li><li data-type='method'><a href="Guild.html#leave">leave</a></li><li data-type='method'><a href="Guild.html#me">me</a></li><li data-type='method'><a href="Guild.html#removeMemberRole">removeMemberRole</a></li><li data-type='method'><a href="Guild.html#unban">unban</a></li></ul></li><li><a href="GuildChannelsManager.html">GuildChannelsManager</a><ul class='methods'><li data-type='method'><a href="GuildChannelsManager.html#fetch">fetch</a></li></ul></li><li><a href="GuildEmojisManager.html">GuildEmojisManager</a><ul class='methods'><li data-type='method'><a href="GuildEmojisManager.html#fetch">fetch</a></li></ul></li><li><a href="GuildInviteManager.html">GuildInviteManager</a><ul class='methods'><li data-type='method'><a href="GuildInviteManager.html#fetch">fetch</a></li></ul></li><li><a href="GuildManager.html">GuildManager</a></li><li><a href="GuildMemberManager.html">GuildMemberManager</a><ul class='methods'><li data-type='method'><a href="GuildMemberManager.html#cleanup">cleanup</a></li><li data-type='method'><a href="GuildMemberManager.html#fetch">fetch</a></li><li data-type='method'><a href="GuildMemberManager.html#localFetch">localFetch</a></li><li data-type='method'><a href="GuildMemberManager.html#remove">remove</a></li><li data-type='method'><a href="GuildMemberManager.html#retrieve">retrieve</a></li><li data-type='method'><a href="GuildMemberManager.html#search">search</a></li><li data-type='method'><a href="GuildMemberManager.html#store">store</a></li><li data-type='method'><a href="GuildMemberManager.html#sweepMembers">sweepMembers</a></li></ul></li><li><a href="GuildRoleManager.html">GuildRoleManager</a><ul class='methods'><li data-type='method'><a href="GuildRoleManager.html#fetch">fetch</a></li></ul></li><li><a href="GuildVoiceStatesManager.html">GuildVoiceStatesManager</a></li><li><a href="Interaction.html">Interaction</a><ul class='methods'><li data-type='method'><a href="Interaction.html#acknowledge">acknowledge</a></li><li data-type='method'><a href="Interaction.html#autocompleteResponse">autocompleteResponse</a></li><li data-type='method'><a href="Interaction.html#edit">edit</a></li><li data-type='method'><a href="Interaction.html#reply">reply</a></li><li data-type='method'><a href="Interaction.html#textPrompt">textPrompt</a></li></ul></li><li><a href="Invite.html">Invite</a></li><li><a href="Member.html">Member</a><ul class='methods'><li data-type='method'><a href="Member.html#addRole">addRole</a></li><li data-type='method'><a href="Member.html#massUpdateRoles">massUpdateRoles</a></li><li data-type='method'><a href="Member.html#removeRole">removeRole</a></li><li data-type='method'><a href="Member.html#timeoutAdd">timeoutAdd</a></li><li data-type='method'><a href="Member.html#timeoutRemove">timeoutRemove</a></li></ul></li><li><a href="Message.html">Message</a><ul class='methods'><li data-type='method'><a href="Message.html#edit">edit</a></li><li data-type='method'><a href="Message.html#reply">reply</a></li><li data-type='method'><a href="Message.html#shelf">shelf</a></li></ul></li><li><a href="MessageComponents.html">MessageComponents</a><ul class='methods'><li data-type='method'><a href="MessageComponents.html#addActionRow">addActionRow</a></li><li data-type='method'><a href="MessageComponents.html#toJSON">toJSON</a></li></ul></li><li><a href="MessagePollManager.html">MessagePollManager</a><ul class='methods'><li data-type='method'><a href="MessagePollManager.html#addVote">addVote</a></li><li data-type='method'><a href="MessagePollManager.html#removeVote">removeVote</a></li></ul></li><li><a href="MessageReactionManager.html">MessageReactionManager</a><ul class='methods'><li data-type='method'><a href="MessageReactionManager.html#addReaction">addReaction</a></li><li data-type='method'><a href="MessageReactionManager.html#removeReaction">removeReaction</a></li></ul></li><li><a href="ModalResponse.html">ModalResponse</a></li><li><a href="OptionSelect.html">OptionSelect</a></li><li><a href="Reaction.html">Reaction</a></li><li><a href="Role.html">Role</a></li><li><a href="ScheduledEvent.html">ScheduledEvent</a></li><li><a href="SlashCommand.html">SlashCommand</a></li><li><a href="Sticker.html">Sticker</a></li><li><a href="TextChannel.html">TextChannel</a><ul class='methods'><li data-type='method'><a href="TextChannel.html#bulkDelete">bulkDelete</a></li><li data-type='method'><a href="TextChannel.html#send">send</a></li></ul></li><li><a href="TextInput.html">TextInput</a><ul class='methods'><li data-type='method'><a href="TextInput.html#setCustomID">setCustomID</a></li><li data-type='method'><a href="TextInput.html#setLabel">setLabel</a></li><li data-type='method'><a href="TextInput.html#setMaxLength">setMaxLength</a></li><li data-type='method'><a href="TextInput.html#setMinLength">setMinLength</a></li><li data-type='method'><a href="TextInput.html#setPlaceholder">setPlaceholder</a></li><li data-type='method'><a href="TextInput.html#setStyle">setStyle</a></li><li data-type='method'><a href="TextInput.html#setValue">setValue</a></li><li data-type='method'><a href="TextInput.html#toJSON">toJSON</a></li></ul></li><li><a href="Thread.html">Thread</a><ul class='methods'><li data-type='method'><a href="Thread.html#send">send</a></li></ul></li><li><a href="User.html">User</a></li><li><a href="UserManager.html">UserManager</a><ul class='methods'><li data-type='method'><a href="UserManager.html#fetch">fetch</a></li><li data-type='method'><a href="UserManager.html#sweepUsers">sweepUsers</a></li></ul></li><li><a href="VoiceChannel.html">VoiceChannel</a></li><li><a href="VoiceState.html">VoiceState</a></li></ul><h3>Global</h3><ul><li><a href="global.html#cacheChannel">cacheChannel</a></li><li><a href="global.html#checkPermission">checkPermission</a></li><li><a href="global.html#decryptMessage">decryptMessage</a></li><li><a href="global.html#decryptText">decryptText</a></li><li><a href="global.html#deepCompare">deepCompare</a></li><li><a href="global.html#encryptMessage">encryptMessage</a></li><li><a href="global.html#encryptText">encryptText</a></li><li><a href="global.html#getAvatarUrl">getAvatarUrl</a></li><li><a href="global.html#getMessage">getMessage</a></li><li><a href="global.html#getTimestamp">getTimestamp</a></li><li><a href="global.html#resolveEmoji">resolveEmoji</a></li><li><a href="global.html#verifyMessageLink">verifyMessageLink</a></li></ul>
    
</nav>

<div id="main">
    
    <h1 class="page-title">util/builder/embedBuilder.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>const { LIMITS } = require("../../constants");
const hexToInt = require("../general/hexToInt");

/**
 * Helps to create an embed for a message.
 * @see {@link https://discord.com/developers/docs/resources/channel#embed-object-embed-structure}
 */
class Embed {
  /**
   * Creates an embed structure.
   */
  constructor() {
    this.type = "rich";
    this.fields = [];
  }

  /**
   * Sets the title of the embed.
   * @param {String} title The title of the embed.
   * @returns {Embed}
   */
  setTitle(title) {

    if (!title)
      throw new TypeError("GLUON: Embed title must be provided.");

    this.title =
      title &amp;&amp; title.length > LIMITS.MAX_EMBED_TITLE ? `${title.substring(0, LIMITS.MAX_EMBED_TITLE - 3)}...` : title;

    return this;
  }

  /**
   * Sets the embed description.
   * @param {String} text The description.
   * @returns {Embed}
   */
  setDescription(text) {

    if (!text)
      throw new TypeError("GLUON: Embed description must be provided.");

    this.description =
      text &amp;&amp; text.length > LIMITS.MAX_EMBED_DESCRIPTION ? `${text.substring(0, LIMITS.MAX_EMBED_DESCRIPTION - 3)}...` : text;

    return this;
  }

  /**
   * Sets the url of the embed.
   * @param {String} url The url.
   * @returns {Embed}
   */
  setURL(url) {

    if (!url)
      throw new TypeError("GLUON: Embed url must be provided.");

    this.url = url;

    return this;
  }

  /**
   * Sets the timestamp displayed on the embed.
   * @param {Number?} timestamp The UNIX timestamp.
   * @returns {Embed}
   */
  setTimestamp(timestamp) {
    if (timestamp) this.timestamp = new Date(timestamp * 1000).toISOString();
    else this.timestamp = new Date().toISOString();

    return this;
  }

  /**
   * Sets the colour of the embed.
   * @param {String | Number} colour The colour.
   * @returns {Embed}
   */
  setColor(colour) {

    if (!colour)
      throw new TypeError("GLUON: Embed colour must be provided.");

    if (typeof colour == "string") {
      if (colour[0] == "#") colour = colour.substring(1);

      this.color = hexToInt(colour);
    } else if (typeof colour == "number") this.color = colour;

    return this;
  }

  /**
   * Sets the embed thumbnail image.
   * @param {String} url The url of the thumbnail.
   * @returns {Embed}
   */
  setThumbnail(url) {

    if (!url)
      throw new TypeError("GLUON: Embed thumbnail url must be provided.");

    this.thumbnail = {
      url,
    };

    return this;
  }

  /**
   * Sets the embed footer.
   * @param {String} text The footer text.
   * @param {String?} icon The url of the footer icon.
   * @returns {Embed}
   */
  setFooter(text, icon) {

    if (!text)
      throw new TypeError("GLUON: Embed footer text must be provided.");

    this.footer = {
      text: text &amp;&amp; text.length > LIMITS.MAX_EMBED_FOOTER_TEXT ? `${text.substring(0, LIMITS.MAX_EMBED_FOOTER_TEXT - 3)}...` : text,
    };
    if (icon) this.footer.icon_url = icon;

    return this;
  }

  /**
   * Sets the embed author info.
   * @param {String?} name The embed author.
   * @param {String?} url The url.
   * @param {String?} icon_url The embed author image url.
   * @returns {Embed}
   */
  setAuthor(name, url, icon_url) {

    if (!name)
      throw new TypeError("GLUON: Embed author name must be provided.");

    this.author = {};

    if (name) this.author.name = (name &amp;&amp; name.length > LIMITS.MAX_EMBED_AUTHOR_NAME ? `${name.substring(0, LIMITS.MAX_EMBED_AUTHOR_NAME - 3)}...` : name);
    if (url) this.author.url = url;
    if (icon_url) this.author.icon_url = icon_url;

    return this;
  }

  /**
   * Adds a field to the embed.
   * @param {String} name Sets the embed field name.
   * @param {String} value Sets the embed field value.
   * @param {Boolean?} inline Whether this field should be displayed inline.
   * @returns {Embed}
   */
  addField(name, value, inline = false) {
    if (this.fields.length >= LIMITS.MAX_EMBED_FIELDS)
      throw new RangeError(`GLUON: Embed fields cannot exceed ${LIMITS.MAX_EMBED_FIELDS} fields.`);

    if (!name || !value)
      throw new TypeError("GLUON: Embed field name and value must be provided.");

    this.fields.push({
      name: name &amp;&amp; name.length > LIMITS.MAX_EMBED_FIELD_NAME ? `${name.substring(0, LIMITS.MAX_EMBED_FIELD_NAME - 3)}...` : name,
      value:
        value &amp;&amp; value.length > LIMITS.MAX_EMBED_FIELD_VALUE ? `${value.substring(0, LIMITS.MAX_EMBED_FIELD_VALUE - 3)}...` : value,
      inline,
    });

    return this;
  }

  /**
   * Sets the embed image url.
   * @param {String} url The image url.
   * @returns {Embed}
   */
  setImage(url) {
    this.image = {
      url,
    };

    return this;
  }

  /**
   * Converts the embed into string form.
   * @returns {String}
   */
  toString() {
    let string = "";

    string += this.title ? `## ${this.title}\n\n` : "";

    string += this.description ? `${this.description}\n\n` : "";

    for (let i = 0; i &lt; this.fields.length; i++)
      string +=
        this.fields[i].name != "\u200b"
          ? `**${this.fields[i].name}**:\n${this.fields[i].value}\n`
          : `${this.fields[i].value}\n`;

    string += this.footer ? this.footer.text : "";

    return string;
  }

  /**
   * Returns the correct Discord format for an embed.
   * @returns {Object}
   */
  toJSON() {
    return {
      title: this.title,
      type: this.type,
      description: this.description,
      url: this.url,
      timestamp: this.timestamp,
      color: this.color,
      footer: this.footer,
      author: this.author,
      fields: this.fields,
      image: this.image,
      thumbnail: this.thumbnail,
    };
  }

  get characterCount() {
    let count = 0;

    count += this.title ? this.title.length : 0;
    count += this.description ? this.description.length : 0;
    count += this.footer?.text ? this.footer.text.length : 0;
    count += this.author?.name ? this.author.name.length : 0;

    for (let i = 0; i &lt; this.fields.length; i++)
      count +=
        (this.fields[i].name?.length || 0) +
        (this.fields[i].value?.length || 0);

    return count;
  }
}

module.exports = Embed;
</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.7</a> on Thu Jul 18 2024 10:49:21 GMT+0000 (Coordinated Universal Time) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>



</body>
</html>
